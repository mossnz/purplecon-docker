import { Head } from 'mdx-deck'


export { book as theme } from 'mdx-deck/themes'

<Head>
  <title>limes for purplecon</title>
</Head>

# Do you know what your containers are made of?
## @mossnz

---
import { Split } from 'mdx-deck/layouts'

export default Split

![](dog_splash.webp)
## h*ck yeah containers

[@alicegoldfuss](https://twitter.com/alicegoldfuss) says that  
containers are _processes_  
born from _tarballs_  
anchored to _namespaces_  
controlled by _cgroups_

~~~notes
This is from the talk "the containers operator's manual" by Alice Goldfuss,

"Containers are made up of a bunch of native Linux features stapled together"

Rather than being magic boxes, containers are standing on the shoulders of giants to make up their abstractions.

And if you're at Kiwicon tomorrow, we'll hear about the regrets of making Docker and the choices made for those abstractions from Jess Frazelle

~~~
---
## Abstractions are friends

Today we'll be dealing with
- docker pull
- docker push
- docker build
- docker run
- docker-compose up

~~~notes
Abstractions help us focus on one part of an overall system at a time.
We still want to learn about what "shoulders of giants" we're standing on,
But we can start working _now_ and get to that as we continue learning

You definitely want to know your abstractions when you're operating software.
~~~
---
## All good code needs a good problem

you have 1337 limes. definitely hax but ok.

let's solve this by uploading the limes to the cloud.

---
## https://try.redis.io

~~~
> incr limes
(integer) 1
> incr limes
(integer) 2
~~~
---
## https://hub.docker.com/_/redis/
### $ docker run --name some-redis -d redis:latest
~~~
aa83e03d773a559f8a020e8d0b8068b797551f58060bb2a77476bb559e51b5ae
~~~
### $ docker run -it --link some-redis:redis --rm redis redis-cli -h redis -p 6379
~~~
redis:6379> incr limes
(integer) 1
redis:6379> incr limes
(integer) 2
~~~
---
### $ node index.js
~~~
const express = require('express');
const redis = require('redis');
~~~
---
export default Split

~~~
express.put('/limes', (res) => {
  redis.incr('limes', (reply) => {
    const limes = reply || 0;
    res.json({
      limes,
    });
  });
});
~~~
![](dog_pyramid.webp)
---
export default Split

![](puppy_lime.gif)
~~~
GET /limes
{limes: "0"}

PUT /limes
{limes: 1}

POST /limes
Cannot POST /limes/
~~~
---
import { Image } from 'mdx-deck'

<Image src='how_to_draw_an_owl.jpg' size='contain' />

~~~notes
Now that we have two containers, ie, minimally viable limes, it's time to draw the rest of the owl.

aka, Let's push this to _production_

But first, a history lesson on computing.
~~~
---
## Reflections on Trusting Trust
To what extent should one trust a statement that a program is free of Trojan horses? Perhaps it is more important to trust the people who wrote the software.

â€” Ken Thompson. 1984. (Turing Award Lecture)
---
